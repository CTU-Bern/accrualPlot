<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>accrualPlot • accrualPlot</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="accrualPlot">
<meta property="og:description" content="accrualPlot">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">accrualPlot</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.5.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/accrualPlot.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="accrualPlot_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>accrualPlot</h1>
            
      
      
      <div class="hidden name"><code>accrualPlot.Rmd</code></div>

    </div>

    
    
<p>Following a trials recruitment is an important task for timing of analyses and ensuring that a trial will not run for too long (longer trials are more expensive). <code>accrualPlot</code> provides tools for easily creating recruitment plots and even for predicting when a trial will have successfully recruited all participants.</p>
<p>The package is loaded like any other:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">accrualPlot</span><span class="op">)</span>
<span class="co">#&gt; Loading required package: lubridate</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Attaching package: 'lubridate'</span>
<span class="co">#&gt; The following objects are masked from 'package:base':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     date, intersect, setdiff, union</span></code></pre></div>
<div id="the-accrual_df" class="section level2">
<h2 class="hasAnchor">
<a href="#the-accrual_df" class="anchor"></a>The <code>accrual_df</code>
</h2>
<p>To work with <code>accrualPlot</code>, we need some data, specifically dates and, optionally, site identifiers. Here’s some data that we will use in the following examples.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">1234</span><span class="op">)</span>
<span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span><span class="op">(</span><span class="st">"2020-12-07"</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">20</span><span class="op">:</span><span class="fl">20</span><span class="op">)</span>, <span class="fl">50</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="va">site</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, <span class="fl">50</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p><code>accrual_df</code>s are simply dataframes with the number of participants on each day participants are recruited (or site) began recruiting.</p>
<div id="monocentric-trials" class="section level3">
<h3 class="hasAnchor">
<a href="#monocentric-trials" class="anchor"></a>Monocentric trials</h3>
<p>Monocentric trials obviously have only a single site, so we only need the <code>x</code> object we just created. We can pass this into the <code>accrual_create_df</code> function.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/accrual_create_df.html">accrual_create_df</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span>
<span class="co">#&gt;         Date Freq Cumulative</span>
<span class="co">#&gt; 1 2020-11-18    0          0</span>
<span class="co">#&gt; 2 2020-11-18    2          2</span>
<span class="co">#&gt; 3 2020-11-19    2          4</span>
<span class="co">#&gt; 4 2020-11-20    3          7</span>
<span class="co">#&gt; 5 2020-11-21    2          9</span>
<span class="co">#&gt; 6 2020-11-22    2         11</span></code></pre></div>
<p>In this case, the <code>accrual_df</code> has a single data frame.</p>
</div>
<div id="multicentric-trials" class="section level3">
<h3 class="hasAnchor">
<a href="#multicentric-trials" class="anchor"></a>Multicentric trials</h3>
<p>For multicentric trials, we should also pass the site identifier to <code>accrual_create_df</code> in the <code>by</code> argument.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/accrual_create_df.html">accrual_create_df</a></span><span class="op">(</span><span class="va">x</span>, by <span class="op">=</span> <span class="va">site</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span><span class="op">(</span><span class="va">df2</span>, <span class="va">head</span><span class="op">)</span>
<span class="co">#&gt; $`1`</span>
<span class="co">#&gt;         Date Freq Cumulative</span>
<span class="co">#&gt; 1 2020-11-18    0          0</span>
<span class="co">#&gt; 2 2020-11-18    2          2</span>
<span class="co">#&gt; 3 2020-11-19    1          3</span>
<span class="co">#&gt; 4 2020-11-20    1          4</span>
<span class="co">#&gt; 5 2020-11-22    1          5</span>
<span class="co">#&gt; 6 2020-11-24    1          6</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $`2`</span>
<span class="co">#&gt;         Date Freq Cumulative</span>
<span class="co">#&gt; 1 2020-11-21    0          0</span>
<span class="co">#&gt; 2 2020-11-21    1          1</span>
<span class="co">#&gt; 3 2020-11-24    2          3</span>
<span class="co">#&gt; 4 2020-12-01    1          4</span>
<span class="co">#&gt; 5 2020-12-02    1          5</span>
<span class="co">#&gt; 6 2020-12-03    1          6</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $`3`</span>
<span class="co">#&gt;         Date Freq Cumulative</span>
<span class="co">#&gt; 1 2020-11-19    0          0</span>
<span class="co">#&gt; 2 2020-11-19    1          1</span>
<span class="co">#&gt; 3 2020-11-20    2          3</span>
<span class="co">#&gt; 4 2020-11-21    1          4</span>
<span class="co">#&gt; 5 2020-11-22    1          5</span>
<span class="co">#&gt; 6 2020-11-25    1          6</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Overall</span>
<span class="co">#&gt;         Date Freq Cumulative</span>
<span class="co">#&gt; 1 2020-11-18    0          0</span>
<span class="co">#&gt; 2 2020-11-18    2          2</span>
<span class="co">#&gt; 3 2020-11-19    2          4</span>
<span class="co">#&gt; 4 2020-11-20    3          7</span>
<span class="co">#&gt; 5 2020-11-21    2          9</span>
<span class="co">#&gt; 6 2020-11-22    2         11</span></code></pre></div>
<p>In this case, the <code>accrual_df</code> is a list of dataframes, one for each site and an overall</p>
</div>
<div id="start-and-end-dates" class="section level3">
<h3 class="hasAnchor">
<a href="#start-and-end-dates" class="anchor"></a>Start and end dates</h3>
<p>By default, the start and end dates are defined based on the dates that you pass to <code>accrual_create_df</code>. You can override these via the <code>start_date</code> and <code>current_date</code> arguments. This is useful for when you have particularly slow recruiting trials (such as those with particularly strict inclusion criteria). For example, our fictitious example trial might have started recruiting on the 1st November. By adding this information, we modify other output</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/accrual_create_df.html">accrual_create_df</a></span><span class="op">(</span><span class="va">x</span>, start_date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span><span class="op">(</span><span class="st">"2020-11-01"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>For multicentric trials where different sites started recruiting at different times, we can pass a vector to <code>start_date</code></p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df4</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/accrual_create_df.html">accrual_create_df</a></span><span class="op">(</span><span class="va">x</span>, by <span class="op">=</span> <span class="va">site</span>, start_date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"2020-11-10"</span>, <span class="st">"2020-11-20"</span>, <span class="st">"2020-11-18"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></code></pre></div>
</div>
</div>
<div id="accrual-plots" class="section level2">
<h2 class="hasAnchor">
<a href="#accrual-plots" class="anchor"></a>Accrual plots</h2>
<p><code>accrualPlot</code> has three flavours of plots:<br>
* Cumulative<br>
* Absolute<br>
* Prediction</p>
<div id="cumulative-plots" class="section level3">
<h3 class="hasAnchor">
<a href="#cumulative-plots" class="anchor"></a>Cumulative plots</h3>
<p>Cumulative plots show a standard step function of the number of participants recruited up to a given point in time. The plots are produced via the <code>plot</code> method (which is a wrapper for the internal function <code>accrual_plot_cum</code>)</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/graphics/par.html">par</a></span><span class="op">(</span>mfrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">df2</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">df4</span><span class="op">)</span></code></pre></div>
<p><img src="accrualPlot_files/figure-html/unnamed-chunk-7-1.png" width="672"></p>
</div>
<div id="absolute-recruitment" class="section level3">
<h3 class="hasAnchor">
<a href="#absolute-recruitment" class="anchor"></a>Absolute recruitment</h3>
<p>Recruitment plots per unit time can be obtained via the <code>absolute</code> method (specify <code>which = "absolute"</code> to <code>plot</code>)</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/graphics/par.html">par</a></span><span class="op">(</span>mfrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">df</span>, which <span class="op">=</span> <span class="st">"abs"</span>, unit <span class="op">=</span> <span class="st">"day"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">df2</span>, which <span class="op">=</span> <span class="st">"abs"</span>, unit <span class="op">=</span> <span class="st">"day"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">df4</span>, which <span class="op">=</span> <span class="st">"abs"</span>, unit <span class="op">=</span> <span class="st">"day"</span><span class="op">)</span></code></pre></div>
<p><img src="accrualPlot_files/figure-html/unnamed-chunk-8-1.png" width="672"></p>
<p>Options for <code>unit</code> are <code>year</code>, <code>month</code>, <code>week</code> and <code>day</code>.</p>
<p>Where multiple sites exist, the different sites are indicated by different colours on the stacked bars.</p>
</div>
<div id="predicting-the-endpoint" class="section level3">
<h3 class="hasAnchor">
<a href="#predicting-the-endpoint" class="anchor"></a>Predicting the endpoint</h3>
<p>It is also possible to predict the time point at which a certain number of participants has been recruited (for estimating when a study will be complete). If we want to recruit a total of 75 participants, we can put that in the <code>target</code> option.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">df</span>, which <span class="op">=</span> <span class="st">"predict"</span>, target <span class="op">=</span> <span class="fl">75</span><span class="op">)</span></code></pre></div>
<p><img src="accrualPlot_files/figure-html/unnamed-chunk-9-1.png" width="700"></p>
</div>
</div>
<div id="recruitment-tables" class="section level2">
<h2 class="hasAnchor">
<a href="#recruitment-tables" class="anchor"></a>Recruitment tables</h2>
<p>Tables of recruitment can also be generated using <code>accrualPlot</code>, via the <code>summary</code> method. As with absolute recruitment above, a unit of time can be specified.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># accrual_table(df) </span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">df</span>, unit <span class="op">=</span> <span class="st">"day"</span><span class="op">)</span> 
<span class="co">#&gt;            start_date          time                    n                   rate</span>
<span class="co">#&gt;  First participant in Days accruing Participants accrued Accrual rate (per day)</span>
<span class="co">#&gt;             18Nov2020            39                   50                   1.28</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">df2</span>, unit <span class="op">=</span> <span class="st">"day"</span><span class="op">)</span> 
<span class="co">#&gt;     name           start_date          time                    n</span>
<span class="co">#&gt;   Center First participant in Days accruing Participants accrued</span>
<span class="co">#&gt;        1            18Nov2020            39                   16</span>
<span class="co">#&gt;        2            21Nov2020            36                   19</span>
<span class="co">#&gt;        3            19Nov2020            38                   15</span>
<span class="co">#&gt;  Overall            18Nov2020            39                   50</span>
<span class="co">#&gt;                    rate</span>
<span class="co">#&gt;  Accrual rate (per day)</span>
<span class="co">#&gt;                    0.41</span>
<span class="co">#&gt;                    0.53</span>
<span class="co">#&gt;                    0.39</span>
<span class="co">#&gt;                    1.28</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">df3</span>, unit <span class="op">=</span> <span class="st">"day"</span><span class="op">)</span> 
<span class="co">#&gt;            start_date          time                    n                   rate</span>
<span class="co">#&gt;  First participant in Days accruing Participants accrued Accrual rate (per day)</span>
<span class="co">#&gt;             18Nov2020            39                   50                   1.28</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">df3</span>, unit <span class="op">=</span> <span class="st">"day"</span>, header <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> 
<span class="co">#&gt;  start_date time  n rate</span>
<span class="co">#&gt;   18Nov2020   39 50 1.28</span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Lukas Bütikofer.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
