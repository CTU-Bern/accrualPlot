<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>accrualPlot • accrualPlot</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="accrualPlot">
<meta property="og:description" content="accrualPlot">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">accrualPlot</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/accrualPlot.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/CTU-Bern/accrualPlot/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="accrualPlot_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>accrualPlot</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/CTU-Bern/accrualPlot/blob/HEAD/vignettes/accrualPlot.Rmd" class="external-link"><code>vignettes/accrualPlot.Rmd</code></a></small>
      <div class="hidden name"><code>accrualPlot.Rmd</code></div>

    </div>

    
    
<p>Following a trials recruitment is an important task for timing of analyses and ensuring that a trial will not run for too long (longer trials are more expensive). <code>accrualPlot</code> provides tools for easily creating recruitment plots and even for predicting when a trial will have successfully recruited all participants.</p>
<p>The package is loaded like any other:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/CTU-Bern/accrualPlot" class="external-link">accrualPlot</a></span><span class="op">)</span>
<span class="co">#&gt; Loading required package: lubridate</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Attaching package: 'lubridate'</span>
<span class="co">#&gt; The following objects are masked from 'package:base':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     date, intersect, setdiff, union</span></code></pre></div>
<div class="section level2">
<h2 id="the-accrual_df">The <code>accrual_df</code><a class="anchor" aria-label="anchor" href="#the-accrual_df"></a>
</h2>
<p>To work with <code>accrualPlot</code>, we need some data, specifically dates and, optionally, site identifiers. Here’s some data that we will use in the following examples.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">accrualdemo</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">accrualdemo</span><span class="op">)</span>
<span class="co">#&gt;           date   site</span>
<span class="co">#&gt; 24  2020-07-09 Site 1</span>
<span class="co">#&gt; 87  2020-07-14 Site 1</span>
<span class="co">#&gt; 126 2020-07-14 Site 1</span>
<span class="co">#&gt; 193 2020-07-14 Site 1</span>
<span class="co">#&gt; 139 2020-07-16 Site 1</span>
<span class="co">#&gt; 248 2020-07-19 Site 1</span></code></pre></div>
<p><code>accrual_df</code>s are simply dataframes with the number of participants on each day participants are recruited (or site) began recruiting.</p>
<div class="section level3">
<h3 id="monocentric-trials">Monocentric trials<a class="anchor" aria-label="anchor" href="#monocentric-trials"></a>
</h3>
<p>Monocentric trials obviously have only a single site, so we only need the <code>x</code> object we just created. We can pass this into the <code>accrual_create_df</code> function.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/accrual_create_df.html">accrual_create_df</a></span><span class="op">(</span><span class="va">accrualdemo</span><span class="op">$</span><span class="va">date</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">df</span>, head <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="co">#&gt; 250 participants recruited between 2020-07-09 and 2020-10-09 </span>
<span class="co">#&gt;         Date Freq Cumulative</span>
<span class="co">#&gt; 1 2020-07-09    0          0</span>
<span class="co">#&gt; 2 2020-07-09    1          1</span>
<span class="co">#&gt; 3 2020-07-14    3          4</span>
<span class="co">#&gt; 4 2020-07-16    1          5</span>
<span class="co">#&gt; 5 2020-07-19    1          6</span>
<span class="co">#&gt; 6 2020-07-20    1          7</span></code></pre></div>
<p>In this case, the <code>accrual_df</code> has a single data frame.</p>
</div>
<div class="section level3">
<h3 id="multicentric-trials">Multicentric trials<a class="anchor" aria-label="anchor" href="#multicentric-trials"></a>
</h3>
<p>For multicentric trials, we should also pass the site identifier to <code>accrual_create_df</code> in the <code>by</code> argument.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/accrual_create_df.html">accrual_create_df</a></span><span class="op">(</span><span class="va">accrualdemo</span><span class="op">$</span><span class="va">date</span>, by <span class="op">=</span> <span class="va">accrualdemo</span><span class="op">$</span><span class="va">site</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">df2</span>, head <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="co">#&gt; Site 1:</span>
<span class="co">#&gt; 141 participants recruited between 2020-07-09 and 2020-10-09 </span>
<span class="co">#&gt;         Date Freq Cumulative</span>
<span class="co">#&gt; 1 2020-07-09    0          0</span>
<span class="co">#&gt; 2 2020-07-09    1          1</span>
<span class="co">#&gt; 3 2020-07-14    3          4</span>
<span class="co">#&gt; 4 2020-07-16    1          5</span>
<span class="co">#&gt; 5 2020-07-19    1          6</span>
<span class="co">#&gt; 6 2020-07-21    1          7</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Site 2:</span>
<span class="co">#&gt; 88 participants recruited between 2020-07-20 and 2020-10-09 </span>
<span class="co">#&gt;         Date Freq Cumulative</span>
<span class="co">#&gt; 1 2020-07-20    0          0</span>
<span class="co">#&gt; 2 2020-07-20    1          1</span>
<span class="co">#&gt; 3 2020-07-21    1          2</span>
<span class="co">#&gt; 4 2020-07-22    1          3</span>
<span class="co">#&gt; 5 2020-07-23    1          4</span>
<span class="co">#&gt; 6 2020-07-26    1          5</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Site 3:</span>
<span class="co">#&gt; 21 participants recruited between 2020-09-04 and 2020-10-09 </span>
<span class="co">#&gt;         Date Freq Cumulative</span>
<span class="co">#&gt; 1 2020-09-04    0          0</span>
<span class="co">#&gt; 2 2020-09-04    1          1</span>
<span class="co">#&gt; 3 2020-09-05    1          2</span>
<span class="co">#&gt; 4 2020-09-07    2          4</span>
<span class="co">#&gt; 5 2020-09-12    1          5</span>
<span class="co">#&gt; 6 2020-09-13    1          6</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Overall:</span>
<span class="co">#&gt; 250 participants recruited between 2020-07-09 and 2020-10-09 </span>
<span class="co">#&gt;         Date Freq Cumulative</span>
<span class="co">#&gt; 1 2020-07-09    0          0</span>
<span class="co">#&gt; 2 2020-07-09    1          1</span>
<span class="co">#&gt; 3 2020-07-14    3          4</span>
<span class="co">#&gt; 4 2020-07-16    1          5</span>
<span class="co">#&gt; 5 2020-07-19    1          6</span>
<span class="co">#&gt; 6 2020-07-20    1          7</span></code></pre></div>
<p>In this case, the <code>accrual_df</code> is a list of dataframes, one for each site and an overall.</p>
</div>
<div class="section level3">
<h3 id="start-and-end-dates">Start and end dates<a class="anchor" aria-label="anchor" href="#start-and-end-dates"></a>
</h3>
<p>By default, the start and end dates are defined based on the dates that you pass to <code>accrual_create_df</code>. You can override these via the <code>start_date</code> and <code>current_date</code> arguments. This is useful for when you have particularly slow recruiting trials (such as those with particularly strict inclusion criteria). For example, our fictitious example trial might have started recruiting on the 1st November. By adding this information, we modify other output</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/accrual_create_df.html">accrual_create_df</a></span><span class="op">(</span><span class="va">accrualdemo</span><span class="op">$</span><span class="va">date</span>, start_date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2020-07-08"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>For multicentric trials where different sites started recruiting at different times, we can pass a vector to <code>start_date</code></p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">start_date</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2020-07-09"</span>,<span class="st">"2020-07-09"</span>,<span class="st">"2020-08-01"</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">start_date</span><span class="op">)</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Site 1"</span>,<span class="st">"Site 2"</span>,<span class="st">"Site 3"</span><span class="op">)</span>
<span class="va">df4</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/accrual_create_df.html">accrual_create_df</a></span><span class="op">(</span><span class="va">accrualdemo</span><span class="op">$</span><span class="va">date</span>, by <span class="op">=</span> <span class="va">accrualdemo</span><span class="op">$</span><span class="va">site</span>, start_date <span class="op">=</span> <span class="va">start_date</span><span class="op">)</span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="accrual-plots">Accrual plots<a class="anchor" aria-label="anchor" href="#accrual-plots"></a>
</h2>
<p><code>accrualPlot</code> has three flavours of plots:<br>
* Cumulative<br>
* Absolute<br>
* Prediction</p>
<p>and supplies both base graphics as well as <code>ggplot2</code> graphics implementations (allowing easier modification).</p>
<div class="section level3">
<h3 id="cumulative-plots">Cumulative plots<a class="anchor" aria-label="anchor" href="#cumulative-plots"></a>
</h3>
<p>Cumulative plots show a standard step function of the number of participants recruited up to a given point in time. The plots are produced via the <code>plot</code> method (which is a wrapper for the internal function <code>accrual_plot_cum</code>)</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">df2</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">df4</span><span class="op">)</span></code></pre></div>
<p><img src="accrualPlot_files/figure-html/unnamed-chunk-8-1.png" width="672"></p>
<p>For <code>ggplot2</code> graphics, use the engine option:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://patchwork.data-imaginist.com" class="external-link">patchwork</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span>
<span class="va">p1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">df</span>, engine <span class="op">=</span> <span class="st">"ggplot"</span><span class="op">)</span>
<span class="va">p2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">df2</span>, engine <span class="op">=</span> <span class="st">"ggplot"</span><span class="op">)</span> <span class="op">+</span> 
   <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>axis.text.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>angle <span class="op">=</span> <span class="fl">45</span>, vjust <span class="op">=</span> <span class="fl">1</span>, hjust<span class="op">=</span><span class="fl">1</span><span class="op">)</span>,
         axis.title.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>
<span class="va">p3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">df4</span>, engine <span class="op">=</span> <span class="st">"ggplot"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>col <span class="op">=</span> <span class="st">"Site"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_classic</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.35</span>,<span class="fl">.9</span><span class="op">)</span>,
     legend.key.height <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fl">2</span>, <span class="st">"mm"</span><span class="op">)</span>,
         legend.text<span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size<span class="op">=</span><span class="fl">8</span><span class="op">)</span>,
         legend.title<span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span>,
     axis.text.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>angle <span class="op">=</span> <span class="fl">45</span>, vjust <span class="op">=</span> <span class="fl">1</span>, hjust<span class="op">=</span><span class="fl">1</span><span class="op">)</span>,
         axis.title.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>
<span class="va">p1</span> <span class="op">+</span> <span class="va">p2</span> <span class="op">+</span> <span class="va">p3</span></code></pre></div>
<p><img src="accrualPlot_files/figure-html/unnamed-chunk-9-1.png" width="672"></p>
</div>
<div class="section level3">
<h3 id="absolute-recruitment">Absolute recruitment<a class="anchor" aria-label="anchor" href="#absolute-recruitment"></a>
</h3>
<p>Recruitment plots per unit time can be obtained via the <code>absolute</code> method (specify <code>which = "absolute"</code> to <code>plot</code>)</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">df</span>, which <span class="op">=</span> <span class="st">"abs"</span>, unit <span class="op">=</span> <span class="st">"week"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">df2</span>, which <span class="op">=</span> <span class="st">"abs"</span>, unit <span class="op">=</span> <span class="st">"week"</span>, legend.list<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>x<span class="op">=</span><span class="st">"topleft"</span><span class="op">)</span>, xlabsel<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">20</span>,by<span class="op">=</span><span class="fl">2</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">df4</span>, which <span class="op">=</span> <span class="st">"abs"</span>, unit <span class="op">=</span> <span class="st">"month"</span>,legend.list<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>x<span class="op">=</span><span class="st">"topleft"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="accrualPlot_files/figure-html/unnamed-chunk-10-1.png" width="672"></p>
<p>Options for <code>unit</code> are <code>year</code>, <code>month</code>, <code>week</code> and <code>day</code>.</p>
<p>Where multiple sites exist, the different sites are indicated by different colours on the stacked bars.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">p1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">df</span>, which <span class="op">=</span> <span class="st">"abs"</span>, unit <span class="op">=</span> <span class="st">"week"</span>, engine <span class="op">=</span> <span class="st">"ggplot"</span><span class="op">)</span>
<span class="va">p2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">df2</span>, which <span class="op">=</span> <span class="st">"abs"</span>, unit <span class="op">=</span> <span class="st">"week"</span>, engine <span class="op">=</span> <span class="st">"ggplot"</span><span class="op">)</span> <span class="op">+</span> 
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>axis.text.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>angle <span class="op">=</span> <span class="fl">45</span>, vjust <span class="op">=</span> <span class="fl">1</span>, hjust<span class="op">=</span><span class="fl">1</span><span class="op">)</span>,
         axis.title.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>
<span class="va">p3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">df4</span>, which <span class="op">=</span> <span class="st">"abs"</span>, unit <span class="op">=</span> <span class="st">"month"</span>, engine <span class="op">=</span> <span class="st">"ggplot"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"Site"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_classic</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.01</span>,<span class="fl">0.9</span><span class="op">)</span>,
     legend.justification <span class="op">=</span> <span class="st">"left"</span>,
     legend.key.height <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fl">2</span>, <span class="st">"mm"</span><span class="op">)</span>,
     legend.key.width <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fl">2</span>, <span class="st">"mm"</span><span class="op">)</span>,
         legend.title<span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span>,
     axis.text.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>angle <span class="op">=</span> <span class="fl">45</span>, vjust <span class="op">=</span> <span class="fl">1</span>, hjust <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,
         axis.title.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>
<span class="va">p1</span> <span class="op">+</span> <span class="va">p2</span> <span class="op">+</span> <span class="va">p3</span></code></pre></div>
<p><img src="accrualPlot_files/figure-html/unnamed-chunk-11-1.png" width="672"></p>
<p>It might be desirable to have panels for each site. This is easy to do with the <code>ggplot</code> implementation. The variable to use in this case is <code>site</code>, which is constructed in the appropriate plot function.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">df2</span>, which <span class="op">=</span> <span class="st">"abs"</span>, unit <span class="op">=</span> <span class="st">"week"</span>, engine <span class="op">=</span> <span class="st">"ggplot"</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">site</span><span class="op">)</span></code></pre></div>
<p><img src="accrualPlot_files/figure-html/unnamed-chunk-12-1.png" width="672"></p>
</div>
<div class="section level3">
<h3 id="predicting-the-endpoint">Predicting the endpoint<a class="anchor" aria-label="anchor" href="#predicting-the-endpoint"></a>
</h3>
<p>It is also possible to predict the time point at which a certain number of participants has been recruited (for estimating when a study will be complete). If we want to recruit a total of 300 participants, we can put that in the <code>target</code> option.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">df</span>, which <span class="op">=</span> <span class="st">"predict"</span>, target <span class="op">=</span> <span class="fl">300</span>, cex_prediction<span class="op">=</span><span class="fl">0.9</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">df2</span>, which <span class="op">=</span> <span class="st">"predict"</span>, target <span class="op">=</span> <span class="fl">300</span>, cex_prediction<span class="op">=</span><span class="fl">0.9</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">df4</span>, which <span class="op">=</span> <span class="st">"predict"</span>, target <span class="op">=</span> <span class="fl">300</span>, cex_prediction<span class="op">=</span><span class="fl">0.9</span>,  center_legend<span class="op">=</span><span class="st">"strip"</span><span class="op">)</span></code></pre></div>
<p><img src="accrualPlot_files/figure-html/unnamed-chunk-13-1.png" width="672"></p>
<p>Or with <code>ggplot2</code>.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">p1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">df</span>, which <span class="op">=</span> <span class="st">"predict"</span>, target <span class="op">=</span> <span class="fl">300</span>, engine <span class="op">=</span> <span class="st">"ggplot2"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>plot.title.position <span class="op">=</span> <span class="st">"plot"</span><span class="op">)</span>
<span class="co">#&gt; Scale for 'x' is already present. Adding another scale for 'x', which will</span>
<span class="co">#&gt; replace the existing scale.</span>
<span class="va">p2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">df2</span>, which <span class="op">=</span> <span class="st">"predict"</span>, target<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Site 1"</span><span class="op">=</span><span class="fl">160</span>,<span class="st">"Site 2"</span><span class="op">=</span><span class="fl">100</span>,<span class="st">"Site 3"</span><span class="op">=</span><span class="fl">40</span>,<span class="st">"Overall"</span><span class="op">=</span><span class="fl">300</span><span class="op">)</span>,
  engine <span class="op">=</span> <span class="st">"ggplot2"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>col <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_classic</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.025</span>,<span class="fl">.9</span><span class="op">)</span>,
        legend.justification <span class="op">=</span> <span class="st">"left"</span>,
        legend.key.height <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fl">2</span>, <span class="st">"mm"</span><span class="op">)</span>,
        legend.key.width <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fl">2</span>, <span class="st">"mm"</span><span class="op">)</span>,
        legend.background <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_rect</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span>,
        axis.text.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>angle <span class="op">=</span> <span class="fl">45</span>, vjust <span class="op">=</span> <span class="fl">1</span>, hjust <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,
        axis.title.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; Scale for 'x' is already present. Adding another scale for 'x', which will</span>
<span class="co">#&gt; replace the existing scale.</span>
<span class="va">p1</span> <span class="op">+</span> <span class="va">p2</span></code></pre></div>
<p><img src="accrualPlot_files/figure-html/unnamed-chunk-14-1.png" width="672"></p>
<p>In the second <code>ggplot2</code> example above, we specify different targets for each site, plus a study-level target. The syntax is the same for base graphics.</p>
<p>It’s not strictly necessary to use <code>plot</code> for any of the above figures. <code>plot</code> is a wrapper which selects one of 6 underlying functions depending on the value of the <code>which</code> and <code>engine</code> arguments. The underlying functions for base graphics are <code>accrual_plot_cum</code> for cumulative plots, <code>accrual_plot_abs</code> for absolute values, and <code>accrual_plot_predict</code> for the prediction plots. The <code>ggplot</code> equivalents just prepend those names with <code>gg_</code>, i.e. <code>gg_accrual_plot_cum</code>, <code>gg_accrual_plot_abs</code> and <code>gg_accrual_plot_predict</code>. For more clarity, it might be desirable to use those instead, e.g.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/accrual_plot_predict.html">gg_accrual_plot_predict</a></span><span class="op">(</span><span class="va">df2</span>, target <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">150</span>, <span class="fl">100</span>, <span class="fl">100</span>, <span class="fl">350</span><span class="op">)</span><span class="op">)</span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="recruitment-tables">Recruitment tables<a class="anchor" aria-label="anchor" href="#recruitment-tables"></a>
</h2>
<p>Tables of recruitment can also be generated using <code>accrualPlot</code>, via the <code>summary</code> method. As with absolute recruitment above, a unit of time can be specified.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># accrual_table(df) </span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">df</span>, unit <span class="op">=</span> <span class="st">"day"</span><span class="op">)</span> 
<span class="co">#&gt;             start_date          time                    n</span>
<span class="co">#&gt; 1 First participant in Days accruing Participants accrued</span>
<span class="co">#&gt; 2            09Jul2020            92                  250</span>
<span class="co">#&gt;                     rate</span>
<span class="co">#&gt; 1 Accrual rate (per day)</span>
<span class="co">#&gt; 2                   2.72</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">df2</span>, unit <span class="op">=</span> <span class="st">"day"</span><span class="op">)</span> 
<span class="co">#&gt;      name           start_date          time                    n</span>
<span class="co">#&gt; 1  Center First participant in Days accruing Participants accrued</span>
<span class="co">#&gt; 2  Site 1            09Jul2020            92                  141</span>
<span class="co">#&gt; 3  Site 2            20Jul2020            81                   88</span>
<span class="co">#&gt; 4  Site 3            04Sep2020            35                   21</span>
<span class="co">#&gt; 5 Overall            09Jul2020            92                  250</span>
<span class="co">#&gt;                     rate</span>
<span class="co">#&gt; 1 Accrual rate (per day)</span>
<span class="co">#&gt; 2                   1.53</span>
<span class="co">#&gt; 3                   1.09</span>
<span class="co">#&gt; 4                   0.60</span>
<span class="co">#&gt; 5                   2.72</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">df3</span>, unit <span class="op">=</span> <span class="st">"day"</span><span class="op">)</span> 
<span class="co">#&gt;             start_date          time                    n</span>
<span class="co">#&gt; 1 First participant in Days accruing Participants accrued</span>
<span class="co">#&gt; 2            08Jul2020            93                  250</span>
<span class="co">#&gt;                     rate</span>
<span class="co">#&gt; 1 Accrual rate (per day)</span>
<span class="co">#&gt; 2                   2.69</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">df3</span>, unit <span class="op">=</span> <span class="st">"day"</span>, header <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> 
<span class="co">#&gt;   start_date time   n rate</span>
<span class="co">#&gt; 1  08Jul2020   93 250 2.69</span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Lukas Bütikofer, Alan G. Haynes.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
